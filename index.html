<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Consulta de Hor√°rios</title>
  <style>
    body { font-family: Arial; padding: 20px; background: #f9f9f9; }
    input, button { padding: 10px; font-size: 16px; margin: 10px 0; display: block; width: 100%; max-width: 300px; }
    pre { background: #fff; padding: 20px; border: 1px solid #ccc; white-space: pre-wrap; }
  </style>
</head>
<body>
  <h2>üóìÔ∏è Verificar hor√°rios de um barbeiro</h2>

  <input type="text" id="dia" placeholder="Dia (ex: 01)">
  <input type="text" id="mes" placeholder="M√™s (ex: 06)">
  <input type="text" id="ano" placeholder="Ano (ex: 2025)">
  <input type="text" id="barbeiro" placeholder="Nome do barbeiro (ex: felipe)">
  <button onclick="consultarAgenda()">üîç Ver hor√°rios</button>

  <pre id="resultado">Preencha os campos e clique para consultar.</pre>

  <script>
    async function consultarAgenda() {
      const dia = document.getElementById('dia').value.padStart(2, '0');
      const mes = document.getElementById('mes').value.padStart(2, '0');
      const ano = document.getElementById('ano').value;
      const barbeiro = document.getElementById('barbeiro').value.trim().toLowerCase();
      const data = `${ano}-${mes}-${dia}`;
      const resultado = document.getElementById('resultado');

      if (!dia || !mes || !ano || !barbeiro) {
        resultado.textContent = '‚ùå Por favor, preencha todos os campos.';
        return;
      }

      resultado.textContent = '‚è≥ Consultando...';

      try {
        const res = await fetch(`https://ice-club.my/get_agenda.php?barbeiro=${barbeiro}&data=${data}`);
        const json = await res.json();

        if (json.erro) {
          resultado.textContent = '‚ùå ' + json.erro;
        } else if (!json.horarios || json.horarios.length === 0) {
          resultado.textContent = `‚ö†Ô∏è Nenhum hor√°rio encontrado para ${json.barbeiro} em ${json.data}`;
        } else {
          resultado.textContent = `üìÖ Hor√°rios de ${json.barbeiro} em ${json.data}:\n\n` + json.horarios.join('\n');
        }
      } catch (e) {
        resultado.textContent = '‚ùå Erro ao consultar o servidor.';
      }
    }
  </script>
</body>
</html>
